<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>HustlerHer Social Suite</title>
  <meta name="description" content="Luxury micro-SaaS planner for business women managing social media marketing."/>
  <style>
    :root{
      --bg:#0b0f17;
      --card: rgba(255,255,255,.07);
      --txt:#f5f6fb;
      --muted:#b9bed0;
      --gold:#d4af37;
      --rose:#e7a7b6;
      --cream:#f7f1ea;
      --line: rgba(255,255,255,.14);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --r: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 600px at 15% 20%, rgba(231,167,182,.25), transparent 55%),
        radial-gradient(900px 600px at 90% 10%, rgba(212,175,55,.22), transparent 55%),
        radial-gradient(900px 600px at 70% 90%, rgba(120,180,255,.16), transparent 55%),
        linear-gradient(180deg, #070a10, #0b0f17 40%, #070a10);
      color: var(--txt);
      min-height:100vh;
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:1120px; margin:0 auto; padding:22px}

    .topbar{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background: rgba(7,10,16,.62);
      border-bottom:1px solid var(--line);
    }
    .topbar .inner{
      max-width:1120px; margin:0 auto;
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 22px;
      gap:12px;
    }
    .brand{
      display:flex; gap:10px; align-items:center;
      font-weight:900; letter-spacing:.2px;
      white-space:nowrap;
    }
    .badge{
      font-size:12px; padding:6px 10px;
      border:1px solid rgba(212,175,55,.45);
      border-radius:999px;
      color: var(--cream);
      background: rgba(212,175,55,.12);
    }
    .nav{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      justify-content:flex-end;
    }
    .nav a{
      padding:10px 12px;
      border:1px solid transparent;
      border-radius:999px;
      color: var(--muted);
    }
    .nav a:hover{border-color: var(--line); color: var(--txt)}
    .nav a.active{
      border-color: rgba(212,175,55,.55);
      color: var(--txt);
      background: rgba(212,175,55,.10);
    }

    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      padding:12px 16px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color: var(--txt);
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
      cursor:pointer;
      user-select:none;
      font-weight:750;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .btn:hover{transform: translateY(-1px)}
    .btn:active{transform: translateY(0)}
    .btn.primary{
      border-color: rgba(212,175,55,.70);
      background: linear-gradient(135deg, rgba(212,175,55,.25), rgba(231,167,182,.18));
    }
    .btn.rose{
      border-color: rgba(231,167,182,.65);
      background: rgba(231,167,182,.12);
    }
    .btn.dark{background: rgba(0,0,0,.30)}
    .btn.small{padding:8px 12px; font-size:13px}

    .grid{display:grid; gap:16px}
    .grid.two{grid-template-columns: repeat(2, minmax(0,1fr))}
    .grid.three{grid-template-columns: repeat(3, minmax(0,1fr))}
    @media (max-width: 980px){ .grid.two,.grid.three{grid-template-columns:1fr} }

    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .pad{padding:18px}
    .card h3{margin:0 0 8px; font-size:18px}
    .muted{color:var(--muted)}
    .tiny{font-size:12px; color: var(--muted)}
    .hr{height:1px; background: var(--line); margin:12px 0}

    .hero{
      padding:34px 0 18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
      align-items:stretch;
    }
    @media (max-width: 980px){ .hero{grid-template-columns:1fr} }
    .heroTitle{
      font-size:44px; line-height:1.02;
      margin:0 0 12px;
      letter-spacing:-.8px;
    }
    .heroTitle span{
      background: linear-gradient(90deg, var(--gold), var(--rose), #ffffff);
      -webkit-background-clip:text;
      background-clip:text;
      color: transparent;
    }
    .heroP{margin:0 0 18px; color: var(--muted); font-size:16px; max-width:56ch}
    .heroActions{display:flex; gap:12px; flex-wrap:wrap}

    .heroArt{
      position:relative;
      min-height: 290px;
      background:
        radial-gradient(200px 200px at 20% 30%, rgba(212,175,55,.30), transparent 60%),
        radial-gradient(260px 220px at 70% 35%, rgba(231,167,182,.26), transparent 60%),
        radial-gradient(260px 220px at 50% 85%, rgba(120,180,255,.18), transparent 60%),
        rgba(255,255,255,.05);
      border:1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .float{
      position:absolute;
      width:150px; height:150px;
      border-radius:40px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.16);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      animation: bob 5.5s ease-in-out infinite;
    }
    .float.one{left:18px; top:18px}
    .float.two{right:18px; top:52px; animation-delay: -1.2s}
    .float.three{left:58px; bottom:18px; animation-delay: -2.1s}
    @keyframes bob{0%,100%{transform: translateY(0)}50%{transform: translateY(-10px)}}

    .kpi{
      position:absolute; right:16px; bottom:14px;
      padding:12px 14px;
      border-radius:18px;
      border:1px solid rgba(212,175,55,.45);
      background: rgba(0,0,0,.22);
      max-width: 70%;
    }
    .kpi b{color: var(--cream)}
    .spark{
      display:inline-block;
      width:8px; height:8px; border-radius:999px;
      background: var(--gold);
      box-shadow: 0 0 18px rgba(212,175,55,.8);
      margin-right:8px;
    }

    .appShell{
      display:grid;
      grid-template-columns: 280px 1fr;
      gap:16px;
      margin-top:16px;
    }
    @media (max-width: 980px){ .appShell{grid-template-columns:1fr} }
    .side{position:sticky; top:86px; height: fit-content; padding:14px}
    .side h4{margin:0 0 8px}
    .side a{
      display:flex; gap:10px; align-items:center;
      padding:10px 12px; border-radius:14px;
      border:1px solid transparent;
      color: var(--muted);
    }
    .side a:hover{border-color: var(--line); color: var(--txt)}
    .side a.active{
      border-color: rgba(231,167,182,.55);
      background: rgba(231,167,182,.10);
      color: var(--txt);
    }

    input, textarea, select{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.18);
      color: var(--txt);
      padding:10px 12px;
      outline:none;
    }
    textarea{min-height:120px; resize:vertical}
    .row{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width: 980px){ .row{grid-template-columns:1fr} }

    .toast{
      position: fixed; right: 16px; bottom: 16px;
      background: rgba(0,0,0,.7);
      border:1px solid rgba(255,255,255,.16);
      padding:12px 14px;
      border-radius:16px;
      color: var(--cream);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      opacity:0; transform: translateY(8px);
      pointer-events:none;
      transition: .18s ease;
      max-width: 360px;
      z-index: 999;
    }
    .toast.show{opacity:1; transform: translateY(0)}

    .lock{
      margin-top:10px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(212,175,55,.35);
      background: rgba(212,175,55,.08);
      color: var(--cream);
      font-size:13px;
      display:flex;
      gap:8px;
      align-items:center;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.22);
      color: var(--cream);
      font-size:12px;
    }
    .miniChart{
      height:140px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      padding:12px;
      display:flex;
      align-items:flex-end;
      gap:10px;
      overflow:hidden;
    }
    .bar{
      flex:1;
      border-radius:14px 14px 10px 10px;
      background: linear-gradient(180deg, rgba(212,175,55,.85), rgba(231,167,182,.25));
      border:1px solid rgba(212,175,55,.25);
      box-shadow: 0 16px 26px rgba(0,0,0,.25);
      position:relative;
    }
    .bar span{
      position:absolute;
      bottom:6px;
      left:0; right:0;
      text-align:center;
      font-size:11px;
      color: rgba(255,255,255,.85);
    }
    .lockedItem{
      opacity:.55;
      filter:saturate(.65);
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="inner">
      <div class="brand">
        HustlerHer Social Suite <span class="badge">Luxury Demo</span>
      </div>

      <nav class="nav" id="topNav">
        <a href="#/" data-route="#/">Home</a>
        <a href="#/pricing" data-route="#/pricing">Pricing</a>
        <a href="#/login" data-route="#/login">Login</a>
        <a href="#/affiliate" data-route="#/affiliate">Affiliate Login</a>
        <a href="#/app" data-route="#/app">Dashboard</a>
      </nav>
    </div>
  </div>

  <div class="wrap" id="view"></div>
  <div class="toast" id="toast"></div>

  <script>
    // ==========================================================
    // STRIPE LINKS (paste later)
    // ==========================================================
    const STRIPE = {
      starter: "PASTE_STRIPE_LINK_STARTER",
      boss: "PASTE_STRIPE_LINK_BOSS",
      ceo: "PASTE_STRIPE_LINK_CEO"
    };

    // ==========================================================
    // USERS (demo only / no backend)
    // ==========================================================
    const AUTH = {
      owner:     { email: "owner@hustlerher.com",     pass: "HustleGold!39", role: "owner" },
      demo:      { email: "demo@hustlerher.com",      pass: "Demo123!",      role: "starter" }, // buyer demo behaves like Starter
      affiliate: { email: "affiliate@hustlerher.com", pass: "Aff123!",       role: "affiliate" }
    };

    // ==========================================================
    // PLAN ACCESS MAP
    // ==========================================================
    const PLAN_TABS = {
      starter: new Set(["planner","analytics"]),
      boss:    new Set(["planner","analytics","contacts","notes","goals"]),
      ceo:     new Set(["planner","analytics","contacts","notes","goals","metrics","exports"]),
      owner:   new Set(["planner","analytics","contacts","notes","goals","metrics","exports","affiliateSales"])
    };

    // Demo dashboard (landing buttons) will open dashboard as DEMO:
    // only 2 features are unlocked in demo mode:
    const DEMO_TABS = new Set(["planner","analytics"]);

    // ==========================================================
    // helper functions
    // ==========================================================
    const $ = (s, el=document) => el.querySelector(s, el);
    const toast = (msg) => {
      const t = document.querySelector("#toast");
      t.textContent = msg;
      t.classList.add("show");
      clearTimeout(toast._tm);
      toast._tm = setTimeout(() => t.classList.remove("show"), 2200);
    };

    const store = {
      get(k, fallback){ try{ return JSON.parse(localStorage.getItem(k)) ?? fallback; }catch{ return fallback; } },
      set(k, v){ localStorage.setItem(k, JSON.stringify(v)); }
    };

    // ==========================================================
    // Affiliate Tracking: store ?ref=CODE
    // ==========================================================
    (function captureAffiliateRef(){
      const url = new URL(location.href);
      const ref = url.searchParams.get("ref");
      if(ref){
        store.set("hh.referrer", ref);

        const clicks = store.get("hh.affClicks", {});
        clicks[ref] = (clicks[ref] || 0) + 1;
        store.set("hh.affClicks", clicks);
      }
    })();

    function getSession(){
      return store.get("hh.session", { role: "guest", plan: "starter" });
    }
    function setSession(role, plan){
      store.set("hh.session", { role, plan, at: Date.now() });
    }

    function logout(){
      store.set("hh.session", { role:"guest", plan:"starter" });
      toast("Logged out.");
      location.hash="#/";
    }

    function requireLoginForApp(){
      const s = getSession();
      if(s.role === "guest"){
        location.hash = "#/login";
        toast("Please login to open the dashboard.");
        return false;
      }
      if(s.role === "affiliate"){
        toast("Affiliate accounts access affiliate dashboard only.");
        location.hash = "#/affiliate-dashboard";
        return false;
      }
      return true;
    }

    // ==========================================================
    // demo data
    // ==========================================================
    const state = {
      notes: store.get("hh.notes", ""),
      calendar: store.get("hh.calendar", [
        {id: crypto.randomUUID(), date:"2026-01-15", platform:"IG", title:"Reel: 3 hooks that sell"},
        {id: crypto.randomUUID(), date:"2026-01-16", platform:"TikTok", title:"Storytime: first $1k week"}
      ]),
      contacts: store.get("hh.contacts", [
        {id: crypto.randomUUID(), name:"Brand Collab ‚Äî Lumi Beauty", handle:"@lumibeauty", note:"Pitch bundle"}
      ]),
      goals: store.get("hh.goals", { followers: 1000, leads: 40, sales: 25 }),
      metrics: store.get("hh.metrics", { revenue: 1250, clicks: 860, leads: 42, conv: 4.9 })
    };

    const persistAll = () => {
      store.set("hh.notes", state.notes);
      store.set("hh.calendar", state.calendar);
      store.set("hh.contacts", state.contacts);
      store.set("hh.goals", state.goals);
      store.set("hh.metrics", state.metrics);
    };

    // ==========================================================
    // router
    // ==========================================================
    function parseRoute(){
      const hash = location.hash || "#/";
      const [path, queryString] = hash.split("?");
      const qs = new URLSearchParams(queryString || "");
      return { path, qs };
    }

    function setActiveNav(path){
      document.querySelectorAll("#topNav a").forEach(a=>{
        const r = a.getAttribute("data-route");
        const active = (r === "#/" && path === "#/") ||
                       (r === "#/pricing" && path === "#/pricing") ||
                       (r === "#/login" && path === "#/login") ||
                       (r === "#/affiliate" && (path === "#/affiliate" || path === "#/affiliate-dashboard")) ||
                       (r === "#/app" && path === "#/app");
        a.classList.toggle("active", active);
      });
    }

    // ==========================================================
    // Views
    // ==========================================================
    function LandingView(){
      return `
        <section class="hero">
          <div class="card">
            <div class="pad">
              <div class="pill">Luxury planner energy ‚Ä¢ Social media execution</div>
              <div style="height:10px"></div>

              <h1 class="heroTitle">Plan your content.<br/>Post like a CEO.<br/>Profit <span>in heels.</span></h1>

              <p class="heroP">
                A mini micro-SaaS inspired by a luxury digital planner workflow: content, analytics, brand hub,
                CEO to-dos, notes, and more ‚Äî designed for women running marketing on Instagram, TikTok, and Pinterest.
              </p>

              <div class="heroActions">
                <a class="btn primary" href="#/app?mode=demo&tab=planner">Launch Dashboard</a>
                <a class="btn rose" href="#/pricing">See Pricing</a>
                <a class="btn" href="#/login">Login</a>
              </div>

              <div class="lock">
                <span class="spark"></span>
                Demo dashboard shows <b>2 unlocked features</b>: Content Calendar + Analytics Preview.
              </div>

              <div class="hr"></div>

              <div class="grid three">
                <div class="card"><div class="pad">
                  <h3>üóì Content Calendar</h3>
                  <div class="muted">Plan posts by date + platform.</div>
                </div></div>

                <div class="card"><div class="pad">
                  <h3>üìä Analytics Preview</h3>
                  <div class="muted">Watch your growth like a CEO.</div>
                </div></div>

                <div class="card lockedItem"><div class="pad">
                  <h3>üîí Premium Suite</h3>
                  <div class="muted">Locked in demo ‚Äî unlock with plans.</div>
                </div></div>
              </div>

            </div>
          </div>

          <div class="heroArt">
            <div class="float one"></div>
            <div class="float two"></div>
            <div class="float three"></div>
            <div class="kpi"><span class="spark"></span><b>Premium UI</b> ‚Ä¢ blush / gold ‚Ä¢ GitHub Pages-ready</div>
          </div>
        </section>
      `;
    }

    function PricingView(){
      return `
        <div class="grid two">
          <div class="card">
            <div class="pad">
              <h2 style="margin:0 0 8px">Pricing</h2>
              <p class="muted" style="margin:0">Paste Stripe links once and your purchase buttons will work.</p>
              <div class="hr"></div>

              <div class="card" style="background:rgba(0,0,0,.18); border-color:rgba(255,255,255,.16)">
                <div class="pad">
                  <div class="tiny"><b>Stripe Links</b> go at the top of this file:</div>
                  <pre style="margin:8px 0 0; white-space:pre-wrap; color:var(--cream); font-size:12px">const STRIPE = {
  starter: "PASTE_STRIPE_LINK_STARTER",
  boss: "PASTE_STRIPE_LINK_BOSS",
  ceo: "PASTE_STRIPE_LINK_CEO"
};</pre>
                </div>
              </div>

              <div class="hr"></div>
              <div class="tiny"><b>Demo Unlock:</b> Content Calendar + Analytics Preview</div>
              <div class="tiny" style="margin-top:6px"><b>Owner Unlock:</b> All features + Affiliate Sales dashboard</div>
            </div>
          </div>

          <div class="grid three" style="grid-column:1/-1">
            ${PricingCard("Starter", "$7", "Quick Start", ["Content Calendar", "Analytics Preview", "2-feature demo dashboard"], "starter")}
            ${PricingCard("Boss", "$19", "Most Popular", ["Calendar + Analytics", "Notes + Goals + Contacts", "Upgrade-ready"], "boss", true)}
            ${PricingCard("CEO", "$39", "Full Suite", ["Everything in Boss", "Metrics + Export tools", "Premium growth suite"], "ceo")}
          </div>
        </div>
      `;
    }

    function PricingCard(name, price, tag, feats, key, featured=false){
      const glow = featured ? "border-color: rgba(212,175,55,.7); box-shadow: 0 18px 70px rgba(212,175,55,.12), var(--shadow);" : "";
      const btnClass = featured ? "btn primary" : "btn";
      return `
        <div class="card" style="${glow}">
          <div class="pad">
            <div style="display:flex; justify-content:space-between; align-items:center; gap:10px">
              <h3 style="margin:0">${name}</h3>
              <span class="badge">${tag}</span>
            </div>
            <div style="font-size:34px; font-weight:950; margin-top:6px">${price}<span class="tiny">/mo</span></div>

            <ul class="tiny" style="margin:12px 0 0; padding-left:16px; color:var(--muted)">
              ${feats.map(f=>`<li style="margin:6px 0">${f}</li>`).join("")}
            </ul>

            <div class="hr"></div>

            <button class="${btnClass}" data-buy="${key}" style="width:100%">Start ${name}</button>

            <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap">
              <button class="btn small dark" data-login-plan="${key}" style="flex:1">Preview Access</button>
              <a class="btn small" href="#/login" style="flex:1">Login</a>
            </div>
          </div>
        </div>
      `;
    }

    function LoginView(){
      return `
        <div class="grid two">
          <div class="card">
            <div class="pad">
              <h2 style="margin:0 0 8px">Login</h2>
              <p class="muted" style="margin:0">Owner unlocks everything. Buyers unlock by plan.</p>
              <div class="hr"></div>

              <label class="tiny">Email</label>
              <input id="loginEmail" placeholder="owner@hustlerher.com"/>

              <div style="height:10px"></div>

              <label class="tiny">Password</label>
              <input id="loginPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/>

              <div style="height:10px"></div>

              <label class="tiny">Buyer Plan (Demo Selector)</label>
              <select id="buyerPlan">
                <option value="starter">Starter ($7)</option>
                <option value="boss">Boss ($19)</option>
                <option value="ceo">CEO ($39)</option>
              </select>

              <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
                <button class="btn primary" id="loginBtn">Login</button>
                <a class="btn" href="#/">Back</a>
              </div>

              <div class="hr"></div>

              <div class="tiny">
                <b>Owner:</b> owner@hustlerher.com / HustleGold!39<br/>
                <b>Buyer Demo:</b> demo@hustlerher.com / Demo123!<br/>
                <b>Affiliate Demo:</b> affiliate@hustlerher.com / Aff123!
              </div>
            </div>
          </div>

          <div class="card">
            <div class="pad">
              <h3>Demo Dashboard Includes</h3>
              <div class="muted">Unlocked in demo:</div>
              <ul style="margin:10px 0 0; padding-left:16px; color:var(--muted)">
                <li>üóì Content Calendar</li>
                <li>üìä Analytics Preview</li>
              </ul>

              <div class="hr"></div>

              <div class="muted">Locked in demo:</div>
              <ul style="margin:10px 0 0; padding-left:16px; color:var(--muted)">
                <li>üìá Contacts Hub</li>
                <li>üéØ Goals</li>
                <li>üìù Notes + Hooks</li>
                <li>üí∞ Metrics</li>
                <li>üì¶ Export / Import</li>
                <li>ü§ù Affiliate Sales (Owner)</li>
              </ul>
            </div>
          </div>
        </div>
      `;
    }

    function AffiliateView(){
      return `
        <div class="grid two">
          <div class="card">
            <div class="pad">
              <h2 style="margin:0 0 8px">Affiliate Login</h2>
              <p class="muted" style="margin:0">Get your referral link + track clicks & signups.</p>
              <div class="hr"></div>

              <label class="tiny">Affiliate Email</label>
              <input id="affEmail" placeholder="affiliate@hustlerher.com"/>

              <div style="height:10px"></div>

              <label class="tiny">Password</label>
              <input id="affPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/>

              <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
                <button class="btn primary" id="affLoginBtn">Login</button>
                <a class="btn" href="#/">Back</a>
              </div>

              <div class="hr"></div>
              <div class="tiny">
                <b>Affiliate Demo:</b> affiliate@hustlerher.com / Aff123!
              </div>
            </div>
          </div>

          <div class="card">
            <div class="pad">
              <h3>Affiliate Payout (Standard)</h3>
              <div class="muted">Example rates (edit anytime):</div>
              <ul style="margin:10px 0 0; padding-left:16px; color:var(--muted)">
                <li>Starter: 30%</li>
                <li>Boss: 35%</li>
                <li>CEO: 40%</li>
              </ul>
              <div class="hr"></div>
              <div class="muted">Affiliate dashboard includes:</div>
              <ul style="margin:10px 0 0; padding-left:16px; color:var(--muted)">
                <li>Referral link generator</li>
                <li>Clicks + signups tracking (demo)</li>
                <li>Estimated commission</li>
              </ul>
            </div>
          </div>
        </div>
      `;
    }

    function AffiliateDashView(){
      const code = store.get("hh.affiliateCode", "HH-001");
      const clicks = store.get("hh.affClicks", {});
      const signups = store.get("hh.affSignups", {});
      const myClicks = clicks[code] || 0;
      const mySignups = signups[code] || 0;

      const base = location.origin + location.pathname;
      const refLink = `${base}?ref=${encodeURIComponent(code)}#/pricing`;

      const estCommission = (mySignups * 8.50).toFixed(2);

      return `
        <div class="card">
          <div class="pad">
            <h2 style="margin:0 0 6px">Affiliate Dashboard</h2>
            <div class="muted">Your referral code: <b style="color:var(--cream)">${code}</b></div>
            <div class="hr"></div>

            <div class="grid three">
              <div class="card"><div class="pad">
                <div class="tiny">Clicks</div>
                <div style="font-size:30px; font-weight:950">${myClicks}</div>
              </div></div>
              <div class="card"><div class="pad">
                <div class="tiny">Signups</div>
                <div style="font-size:30px; font-weight:950">${mySignups}</div>
              </div></div>
              <div class="card"><div class="pad">
                <div class="tiny">Est. Commission</div>
                <div style="font-size:30px; font-weight:950">$${estCommission}</div>
              </div></div>
            </div>

            <div class="hr"></div>

            <label class="tiny">Your Affiliate Link</label>
            <input id="affLink" value="${refLink}" readonly />

            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
              <button class="btn primary" id="copyAff">Copy Link</button>
              <button class="btn rose" id="simulateSignup">Simulate Signup</button>
              <button class="btn dark" id="logoutAff">Logout</button>
            </div>

            <div class="lock" style="margin-top:14px">
              <span class="spark"></span>
              This is a standard affiliate demo system (local tracking). Add backend later if desired.
            </div>
          </div>
        </div>
      `;
    }

    function LockedView(){
      return `
        <div class="card"><div class="pad">
          <h2 style="margin:0 0 8px">Locked Feature</h2>
          <p class="muted" style="margin:0 0 12px">This feature is locked for your plan.</p>
          <a class="btn primary" href="#/pricing">Upgrade Access</a>
        </div></div>
      `;
    }

    function AppView(qs){
      if(!requireLoginForApp()) return "";
      const session = getSession();
      const role = session.role;
      const plan = session.plan || "starter";

      const isOwner = role === "owner";
      const mode = qs.get("mode") || ""; // demo mode comes from landing open
      let tab = qs.get("tab") || "planner";

      // Determine allowed tabs
      const allowed = isOwner
        ? PLAN_TABS.owner
        : (mode === "demo" ? DEMO_TABS : (PLAN_TABS[plan] || PLAN_TABS.starter));

      if(!allowed.has(tab)){
        tab = "planner";
        toast("That feature is locked.");
      }

      return `
        <div class="appShell">
          <div class="card side">
            <h4>Dashboard</h4>

            <div class="lock" style="margin-top:0">
              <span class="spark"></span>
              Mode: <b>${isOwner ? "Owner (Full Access)" : (mode==="demo" ? "Landing Demo (2 Features)" : ("Buyer ("+plan.toUpperCase()+")"))}</b>
            </div>

            <div style="height:10px"></div>

            <a href="#/app?${mode==="demo"?"mode=demo&":""}tab=planner" class="${tab==="planner"?"active":""}">üóì Content Calendar</a>
            <a href="#/app?${mode==="demo"?"mode=demo&":""}tab=analytics" class="${tab==="analytics"?"active":""}">üìä Analytics Preview</a>

            <div class="hr"></div>

            <a href="#/app?tab=contacts" class="${tab==="contacts"?"active":""} ${allowed.has("contacts")?"":"lockedItem"}">üìá Contacts Hub</a>
            <a href="#/app?tab=goals" class="${tab==="goals"?"active":""} ${allowed.has("goals")?"":"lockedItem"}">üéØ Goals</a>
            <a href="#/app?tab=notes" class="${tab==="notes"?"active":""} ${allowed.has("notes")?"":"lockedItem"}">üìù Notes + Hooks</a>
            <a href="#/app?tab=metrics" class="${tab==="metrics"?"active":""} ${allowed.has("metrics")?"":"lockedItem"}">üí∞ Metrics</a>
            <a href="#/app?tab=exports" class="${tab==="exports"?"active":""} ${allowed.has("exports")?"":"lockedItem"}">üì¶ Export Tools</a>

            ${isOwner ? `
              <div class="hr"></div>
              <a href="#/app?tab=affiliateSales" class="${tab==="affiliateSales"?"active":""}">ü§ù Affiliate Sales</a>
            ` : ""}

            <div class="hr"></div>
            <button class="btn dark" id="logoutBtn2" style="width:100%">Logout</button>
          </div>

          <div class="card">
            <div class="pad">
              ${AppTab(tab, allowed, isOwner)}
            </div>
          </div>
        </div>
      `;
    }

    // ==========================================================
    // APP TAB CONTENTS
    // ==========================================================
    function AppTab(tab, allowedTabs, isOwner){
      // DEMO / ALL Plans: Calendar + Analytics preview are always in allowedTabs if they got here
      if(tab==="planner"){
        return `
          <h2 style="margin:0 0 6px">Content Calendar</h2>
          <div class="muted">Add posts to your calendar.</div>
          <div class="hr"></div>

          <div class="row">
            <div><label class="tiny">Date</label><input id="calDate" type="date"/></div>
            <div><label class="tiny">Platform</label><input id="calPlatform" placeholder="IG / TikTok / Pinterest"/></div>
          </div>
          <div style="margin-top:12px">
            <label class="tiny">Title</label>
            <input id="calTitle" placeholder="Reel: 3 hooks that sell"/>
          </div>
          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
            <button class="btn primary" id="addCal">Add Post</button>
          </div>

          <div class="hr"></div>
          <div class="grid">
            ${state.calendar.map(item=>`
              <div class="card"><div class="pad" style="display:flex; justify-content:space-between; gap:10px; align-items:center">
                <div>
                  <b>${escapeHtml(item.date)}</b> ‚Ä¢ <span class="badge">${escapeHtml(item.platform)}</span>
                  <div class="muted" style="margin-top:6px">${escapeHtml(item.title)}</div>
                </div>
                <button class="btn" data-delcal="${item.id}">Remove</button>
              </div></div>
            `).join("")}
          </div>
        `;
      }

      if(tab==="analytics"){
        // Analytics Preview (interactive)
        const bars = [
          {label:"Mon", v:38},
          {label:"Tue", v:52},
          {label:"Wed", v:64},
          {label:"Thu", v:58},
          {label:"Fri", v:72},
          {label:"Sat", v:86},
          {label:"Sun", v:63}
        ];

        return `
          <h2 style="margin:0 0 6px">Analytics Preview</h2>
          <div class="muted">CEO-style overview of growth and performance.</div>
          <div class="hr"></div>

          <div class="grid three">
            <div class="card"><div class="pad">
              <div class="tiny">Revenue</div>
              <div style="font-size:30px; font-weight:950">$${state.metrics.revenue}</div>
              <div class="tiny" style="margin-top:8px">+12% this week</div>
            </div></div>

            <div class="card"><div class="pad">
              <div class="tiny">Clicks</div>
              <div style="font-size:30px; font-weight:950">${state.metrics.clicks}</div>
              <div class="tiny" style="margin-top:8px">New traffic spike</div>
            </div></div>

            <div class="card"><div class="pad">
              <div class="tiny">Leads</div>
              <div style="font-size:30px; font-weight:950">${state.metrics.leads}</div>
              <div class="tiny" style="margin-top:8px">Conversion ${state.metrics.conv}%</div>
            </div></div>
          </div>

          <div class="hr"></div>

          <div class="card" style="background:rgba(0,0,0,.18); border-color:rgba(255,255,255,.14)">
            <div class="pad">
              <div style="display:flex; justify-content:space-between; align-items:center; gap:10px">
                <b>Weekly Engagement</b>
                <span class="badge">Preview</span>
              </div>

              <div style="height:12px"></div>

              <div class="miniChart">
                ${bars.map(b=>`
                  <div class="bar" style="height:${b.v}%;"><span>${b.label}</span></div>
                `).join("")}
              </div>

              <div style="height:12px"></div>

              <div class="tiny">Tip: This preview is intentionally lightweight for demo use.</div>
            </div>
          </div>
        `;
      }

      // If tab not allowed, show Locked
      if(!allowedTabs.has(tab)) return LockedView();

      // Unlocked by higher plans / owner
      if(tab==="contacts"){
        return `
          <h2 style="margin:0 0 6px">Contacts Hub</h2>
          <div class="muted">Track brands/clients & collaboration notes.</div>
          <div class="hr"></div>

          <div class="grid">
            ${state.contacts.map(c=>`
              <div class="card"><div class="pad">
                <b>${escapeHtml(c.name)}</b> ‚Ä¢ <span class="badge">${escapeHtml(c.handle)}</span>
                <div class="muted" style="margin-top:8px">${escapeHtml(c.note)}</div>
              </div></div>
            `).join("")}
          </div>

          <div class="hr"></div>
          <div class="tiny">Add backend later for real CRM sync.</div>
        `;
      }

      if(tab==="goals"){
        return `
          <h2 style="margin:0 0 6px">Goals</h2>
          <div class="muted">Set targets and stay on track.</div>
          <div class="hr"></div>

          <div class="row">
            <div><label class="tiny">Followers Goal</label><input id="gFollowers" type="number" value="${state.goals.followers}"/></div>
            <div><label class="tiny">Leads Goal</label><input id="gLeads" type="number" value="${state.goals.leads}"/></div>
          </div>
          <div style="margin-top:12px">
            <label class="tiny">Sales Goal</label>
            <input id="gSales" type="number" value="${state.goals.sales}"/>
          </div>

          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
            <button class="btn primary" id="saveGoals">Save Goals</button>
          </div>

          <div class="lock">
            <span class="spark"></span>
            Goals saved in your browser (no backend required).
          </div>
        `;
      }

      if(tab==="notes"){
        return `
          <h2 style="margin:0 0 6px">Notes + Hooks</h2>
          <div class="muted">Capture hook ideas, offers, scripts, and CTA phrases.</div>
          <div class="hr"></div>

          <label class="tiny">Your Notes</label>
          <textarea id="notesBox" placeholder="Hooks, captions, offers...">${escapeHtml(state.notes)}</textarea>

          <div class="tiny" style="margin-top:8px">Auto-saved</div>

          <div class="hr"></div>

          <div class="grid three">
            ${[
              "Stop scrolling ‚Äî this is how I turned 1 post into 12 sales.",
              "If you‚Äôre posting daily but not selling, you need THIS instead.",
              "My calendar makes money while I sleep ‚Äî here‚Äôs how."
            ].map(h=>`
              <div class="card"><div class="pad">
                <div class="tiny">Hook</div>
                <b>${escapeHtml(h)}</b>
              </div></div>
            `).join("")}
          </div>
        `;
      }

      if(tab==="metrics"){
        return `
          <h2 style="margin:0 0 6px">Metrics</h2>
          <div class="muted">Deeper KPI editor (owner & higher plans).</div>
          <div class="hr"></div>

          <div class="row">
            <div><label class="tiny">Revenue</label><input id="mRevenue" type="number" value="${state.metrics.revenue}"/></div>
            <div><label class="tiny">Clicks</label><input id="mClicks" type="number" value="${state.metrics.clicks}"/></div>
          </div>

          <div style="margin-top:12px" class="row">
            <div><label class="tiny">Leads</label><input id="mLeads" type="number" value="${state.metrics.leads}"/></div>
            <div><label class="tiny">Conversion %</label><input id="mConv" type="number" step="0.1" value="${state.metrics.conv}"/></div>
          </div>

          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
            <button class="btn primary" id="saveMetrics">Save Metrics</button>
          </div>

          <div class="lock">
            <span class="spark"></span>
            This is editable so owners can demo ‚Äúreal analytics‚Äù.
          </div>
        `;
      }

      if(tab==="exports"){
        return `
          <h2 style="margin:0 0 6px">Export Tools</h2>
          <div class="muted">Export your data (demo JSON).</div>
          <div class="hr"></div>

          <button class="btn primary" id="exportBtn">Export as JSON</button>
          <div style="height:12px"></div>
          <textarea id="exportBox" placeholder="Export output appears here..." readonly></textarea>

          <div class="lock">
            <span class="spark"></span>
            Easy upgrade later: add Google Sheets or Notion export.
          </div>
        `;
      }

      // OWNER ONLY: Affiliate Sales view
      if(tab==="affiliateSales" && isOwner){
        const clicks = store.get("hh.affClicks", {});
        const signups = store.get("hh.affSignups", {});
        const rows = Object.keys({...clicks, ...signups}).sort().map(code=>{
          const c = clicks[code] || 0;
          const s = signups[code] || 0;
          const est = (s * 8.50).toFixed(2);
          return {code, clicks:c, signups:s, est};
        });

        return `
          <h2 style="margin:0 0 6px">Affiliate Sales</h2>
          <div class="muted">Owner view: track affiliate referrals + estimated commissions.</div>
          <div class="hr"></div>

          <div class="grid three">
            <div class="card"><div class="pad">
              <div class="tiny">Total Affiliates</div>
              <div style="font-size:30px; font-weight:950">${rows.length}</div>
            </div></div>

            <div class="card"><div class="pad">
              <div class="tiny">Total Clicks</div>
              <div style="font-size:30px; font-weight:950">${rows.reduce((a,r)=>a+r.clicks,0)}</div>
            </div></div>

            <div class="card"><div class="pad">
              <div class="tiny">Total Signups</div>
              <div style="font-size:30px; font-weight:950">${rows.reduce((a,r)=>a+r.signups,0)}</div>
            </div></div>
          </div>

          <div class="hr"></div>

          <div class="card" style="background:rgba(0,0,0,.18); border-color:rgba(255,255,255,.14)">
            <div class="pad">
              <div style="display:flex; justify-content:space-between; align-items:center">
                <b>Affiliate Performance</b>
                <span class="badge">Owner</span>
              </div>

              <div style="height:10px"></div>

              ${rows.length ? rows.map(r=>`
                <div class="card" style="margin-top:10px; background:rgba(255,255,255,.04)">
                  <div class="pad" style="display:flex; justify-content:space-between; gap:10px; align-items:center">
                    <div>
                      <b>${escapeHtml(r.code)}</b>
                      <div class="tiny">Clicks: ${r.clicks} ‚Ä¢ Signups: ${r.signups}</div>
                    </div>
                    <div style="text-align:right">
                      <div class="tiny">Est. Commission</div>
                      <b style="color:var(--cream)">$${r.est}</b>
                    </div>
                  </div>
                </div>
              `).join("") : `
                <div class="muted">No affiliate activity yet. Use the Affiliate Login ‚Üí ‚ÄúSimulate Signup‚Äù to test.</div>
              `}
            </div>
          </div>

          <div class="lock">
            <span class="spark"></span>
            This is your owner-only ‚Äúaffiliate sales‚Äù view ‚úÖ
          </div>
        `;
      }

      return `<div class="muted">Unknown tab.</div>`;
    }

    // ==========================================================
    // EVENTS
    // ==========================================================
    function bindHandlers(){
      // Stripe buy buttons
      document.querySelectorAll("[data-buy]").forEach(btn=>{
        btn.onclick = ()=>{
          const key = btn.getAttribute("data-buy");
          const link = STRIPE[key];
          if(!link || link.startsWith("PASTE_")) return toast("Paste Stripe links first.");
          window.open(link, "_blank","noopener,noreferrer");
        };
      });

      // Pricing "Preview Access" buttons (simulates buyer access)
      document.querySelectorAll("[data-login-plan]").forEach(btn=>{
        btn.onclick = ()=>{
          const plan = btn.getAttribute("data-login-plan") || "starter";
          setSession("buyer", plan);
          toast("Preview access: " + plan.toUpperCase());
          location.hash = "#/app?tab=planner";
        };
      });

      // Login
      const loginBtn = document.querySelector("#loginBtn");
      if(loginBtn){
        loginBtn.onclick = ()=>{
          const email = (document.querySelector("#loginEmail").value||"").trim().toLowerCase();
          const pass  = (document.querySelector("#loginPass").value||"").trim();
          const buyerPlan = (document.querySelector("#buyerPlan")?.value || "starter");

          if(email===AUTH.owner.email && pass===AUTH.owner.pass){
            setSession("owner", "owner");
            toast("Owner login ‚úÖ Full Access");
            location.hash="#/app?tab=planner";
            return;
          }
          if(email===AUTH.demo.email && pass===AUTH.demo.pass){
            setSession("buyer", "starter");
            toast("Buyer demo login ‚ú® Starter Access");
            location.hash="#/app?tab=planner";
            return;
          }

          // allow any buyer login format (simple demo) -> uses selected plan
          if(email && pass && email.includes("@")){
            setSession("buyer", buyerPlan);
            toast("Buyer login ‚úÖ Plan: " + buyerPlan.toUpperCase());
            location.hash="#/app?tab=planner";
            return;
          }

          toast("Invalid login.");
        };
      }

      // Affiliate Login
      const affLoginBtn = document.querySelector("#affLoginBtn");
      if(affLoginBtn){
        affLoginBtn.onclick = ()=>{
          const email = (document.querySelector("#affEmail").value||"").trim().toLowerCase();
          const pass  = (document.querySelector("#affPass").value||"").trim();
          if(email===AUTH.affiliate.email && pass===AUTH.affiliate.pass){
            setSession("affiliate", "affiliate");
            if(!store.get("hh.affiliateCode", "")){
              const newCode = "HH-" + String(Math.floor(100 + Math.random()*900));
              store.set("hh.affiliateCode", newCode);
            }
            toast("Affiliate login ‚úÖ");
            location.hash = "#/affiliate-dashboard";
            return;
          }
          toast("Invalid affiliate login.");
        };
      }

      // Affiliate Dashboard actions
      const copyAff = document.querySelector("#copyAff");
      if(copyAff){
        copyAff.onclick = async ()=>{
          const link = document.querySelector("#affLink").value;
          try{ await navigator.clipboard.writeText(link); toast("Affiliate link copied."); }
          catch{ toast("Copy failed. Select link and copy manually."); }
        };
      }

      const simulateSignup = document.querySelector("#simulateSignup");
      if(simulateSignup){
        simulateSignup.onclick = ()=>{
          const code = store.get("hh.affiliateCode","HH-001");
          const signups = store.get("hh.affSignups", {});
          signups[code] = (signups[code] || 0) + 1;
          store.set("hh.affSignups", signups);

          // also log a "sale" for owner to see
          const sales = store.get("hh.affSales", {});
          sales[code] = (sales[code] || 0) + 1;
          store.set("hh.affSales", sales);

          toast("Simulated signup added ‚úÖ");
          render();
        };
      }

      const logoutAff = document.querySelector("#logoutAff");
      if(logoutAff) logoutAff.onclick = logout;

      const logoutBtn2 = document.querySelector("#logoutBtn2");
      if(logoutBtn2) logoutBtn2.onclick = logout;

      // notes autosave
      document.querySelectorAll("#notesBox").forEach(el=>{
        el.oninput = ()=>{ state.notes = el.value; persistAll(); };
      });

      // planner add/remove
      const addCal = document.querySelector("#addCal");
      if(addCal){
        addCal.onclick = ()=>{
          const date = document.querySelector("#calDate").value;
          const platform = (document.querySelector("#calPlatform").value||"").trim();
          const title = (document.querySelector("#calTitle").value||"").trim();
          if(!date||!platform||!title) return toast("Add date, platform, title.");
          state.calendar.unshift({id: crypto.randomUUID(), date, platform, title});
          persistAll(); toast("Post added."); render();
        };
      }
      document.querySelectorAll("[data-delcal]").forEach(b=>{
        b.onclick = ()=>{
          const id = b.getAttribute("data-delcal");
          state.calendar = state.calendar.filter(x=>x.id!==id);
          persistAll(); render();
        };
      });

      // goals save
      const saveGoals = document.querySelector("#saveGoals");
      if(saveGoals){
        saveGoals.onclick = ()=>{
          state.goals.followers = Number(document.querySelector("#gFollowers").value||0);
          state.goals.leads     = Number(document.querySelector("#gLeads").value||0);
          state.goals.sales     = Number(document.querySelector("#gSales").value||0);
          persistAll();
          toast("Goals saved ‚úÖ");
        };
      }

      // metrics save
      const saveMetrics = document.querySelector("#saveMetrics");
      if(saveMetrics){
        saveMetrics.onclick = ()=>{
          state.metrics.revenue = Number(document.querySelector("#mRevenue").value||0);
          state.metrics.clicks  = Number(document.querySelector("#mClicks").value||0);
          state.metrics.leads   = Number(document.querySelector("#mLeads").value||0);
          state.metrics.conv    = Number(document.querySelector("#mConv").value||0);
          persistAll();
          toast("Metrics saved ‚úÖ");
        };
      }

      // export
      const exportBtn = document.querySelector("#exportBtn");
      if(exportBtn){
        exportBtn.onclick = ()=>{
          const out = {
            notes: state.notes,
            calendar: state.calendar,
            contacts: state.contacts,
            goals: state.goals,
            metrics: state.metrics
          };
          const box = document.querySelector("#exportBox");
          box.value = JSON.stringify(out, null, 2);
          toast("Export generated ‚úÖ");
        };
      }
    }

    // ==========================================================
    // RENDER
    // ==========================================================
    function render(){
      const { path, qs } = parseRoute();
      const normalized = (path === "#/dashboard") ? "#/app" : path;
      setActiveNav(normalized);

      const view = document.querySelector("#view");

      if(normalized === "#/") view.innerHTML = LandingView();
      else if(normalized === "#/pricing") view.innerHTML = PricingView();
      else if(normalized === "#/login") view.innerHTML = LoginView();
      else if(normalized === "#/affiliate") view.innerHTML = AffiliateView();
      else if(normalized === "#/affiliate-dashboard"){
        const s = getSession();
        if(s.role !== "affiliate"){ toast("Affiliate login required."); location.hash="#/affiliate"; return; }
        view.innerHTML = AffiliateDashView();
      }
      else if(normalized === "#/app") view.innerHTML = AppView(qs);
      else view.innerHTML = `<div class="card"><div class="pad"><h2>Not found</h2><a class="btn primary" href="#/">Go Home</a></div></div>`;

      bindHandlers();
    }

    function escapeHtml(str){
      return (str ?? "").replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[m]));
    }

    window.addEventListener("hashchange", render);
    window.addEventListener("load", ()=>{
      if(!location.hash) location.hash="#/";
      render();
    });
  </script>
</body>
</html>
