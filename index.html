<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Hustle Her Social Suite</title>
<style>
  :root{
    --bg0:#07060a;
    --bg1:#120615;
    --ink:#f3eef7;
    --muted:#bfb2c8;
    --card:rgba(255,255,255,.06);
    --stroke:rgba(255,255,255,.14);
    --gold:#f2cf7a;
    --gold2:#caa24b;
    --plum:#6b1f6b;
    --rose:#b94d7b;
    --shadow: 0 12px 40px rgba(0,0,0,.55);
    --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    color:var(--ink);
    background:
      radial-gradient(900px 700px at 18% 20%, rgba(185,77,123,.35), transparent 55%),
      radial-gradient(800px 650px at 85% 25%, rgba(242,207,122,.25), transparent 60%),
      radial-gradient(900px 900px at 60% 85%, rgba(107,31,107,.25), transparent 55%),
      linear-gradient(180deg, var(--bg1), var(--bg0));
    overflow-x:hidden;
  }
  .wrap{max-width:1160px;margin:0 auto;padding:0 18px}
  /* Topbar */
  .topbar{
    position:sticky; top:0; z-index:50;
    backdrop-filter: blur(14px);
    background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.25));
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  .topbar .inner{
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 0;
    gap:14px;
  }
  .brand{display:flex; align-items:center; gap:10px; cursor:pointer}
  .logo{
    width:36px;height:36px;border-radius:12px;
    background: radial-gradient(circle at 30% 30%, #fff2, transparent 55%),
                linear-gradient(135deg, rgba(242,207,122,.95), rgba(185,77,123,.85));
    border:1px solid rgba(255,255,255,.18);
    box-shadow: 0 10px 26px rgba(0,0,0,.5);
    display:grid; place-items:center;
    font-weight:900;
  }
  .brand h1{margin:0;font-size:14px;line-height:1.1}
  .brand small{display:block;color:var(--muted);font-weight:500;margin-top:2px}
  .nav{display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end}
  .pill{
    padding:8px 12px;border-radius:999px;
    background: rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.12);
    color:var(--ink);font-weight:650;cursor:pointer;
    transition:.18s transform,.18s background,.18s border;
  }
  .pill:hover{transform: translateY(-1px); background:rgba(255,255,255,.09); border-color:rgba(255,255,255,.18)}
  .cta{
    padding:10px 14px;border-radius:999px;
    background: linear-gradient(135deg, rgba(242,207,122,.95), rgba(202,162,75,.92));
    color:#1a1208;border:1px solid rgba(255,255,255,.18);
    font-weight:800;cursor:pointer;box-shadow: 0 12px 28px rgba(0,0,0,.45);
  }
  .ghost{
    padding:10px 14px;border-radius:999px;
    background: rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.14);
    color:var(--ink);font-weight:800;cursor:pointer;
  }

  /* Views */
  .view{display:none}
  .view.active{display:block}

  /* Hero */
  .hero{padding:26px 0 10px;}
  .heroCard{
    border-radius:22px;
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.12);
    box-shadow: var(--shadow);
    overflow:hidden; position:relative;
  }
  .glowOrb{
    position:absolute; right:-170px; top:40px;
    width:320px;height:320px;border-radius:50%;
    background: radial-gradient(circle at 35% 35%, rgba(242,207,122,.55), rgba(242,207,122,.12) 55%, transparent 70%);
    opacity:.85;
  }
  .heroGrid{display:grid;grid-template-columns:1.05fr .95fr;gap:18px;padding:22px;}
  .kicker{
    display:inline-flex;gap:8px;align-items:center;
    padding:6px 10px;border-radius:999px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(185,77,123,.18);
    color:#f7e6f0;font-size:12px;font-weight:700;
  }
  .headline{
    font-family: ui-serif, Georgia, "Times New Roman", serif;
    font-weight:800;letter-spacing:-.6px;line-height:1.03;
    margin:14px 0 10px;font-size: clamp(34px, 4.2vw, 54px);
  }
  .headline .gold{color:var(--gold)}
  .sub{color:var(--muted);max-width:52ch;line-height:1.55;font-size:14.5px;}
  .heroBtns{display:flex;gap:10px;flex-wrap:wrap;margin-top:16px}
  .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
  .chip{
    padding:7px 10px;border-radius:999px;
    background: rgba(0,0,0,.25);
    border:1px solid rgba(255,255,255,.12);
    color:#e8dff0;font-size:12px;font-weight:700;display:inline-flex;align-items:center;gap:8px;
  }
  .heroRight{
    position:relative;border-radius:18px;
    background: rgba(0,0,0,.25);
    border:1px solid rgba(255,255,255,.10);
    padding:14px;overflow:hidden;min-height:330px;
  }
  .miniTop{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
  .tag{
    font-size:11px;letter-spacing:.6px;color:#1a1208;
    background: linear-gradient(135deg, rgba(242,207,122,.95), rgba(202,162,75,.92));
    padding:5px 10px;border-radius:999px;font-weight:900;
  }
  .statRow{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .stat{background: rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10);border-radius:14px;padding:10px}
  .stat b{display:block;font-size:12px}
  .stat small{color:var(--muted)}
  .miniCards{margin-top:10px;display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .miniCard{background: rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.10);border-radius:14px;padding:10px}
  .miniCard .t{font-weight:900}
  .miniCard .d{color:var(--muted);font-size:12px;margin-top:4px}
  .heroArtRow{
    position:absolute; right:12px; bottom:12px;
    display:flex; gap:10px; align-items:flex-end; pointer-events:none;
  }
  .char{
    width:92px;height:92px;border-radius:18px;
    border:1px solid rgba(255,255,255,.18);
    background: rgba(255,255,255,.06);
    object-fit:cover; box-shadow: 0 14px 30px rgba(0,0,0,.55);
  }
  .char.big{width:118px;height:118px;border-radius:20px}

  /* Sections */
  .section{padding:24px 0}
  .h2{font-size:18px;margin:0 0 6px}
  .p{color:var(--muted);margin:0}
  .featureGrid{
    margin-top:14px;display:grid;
    grid-template-columns: repeat(4, minmax(0,1fr));
    gap:12px;
  }
  .fCard{
    border-radius: var(--radius);
    background: rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.10);
    padding:14px;min-height:126px;position:relative;overflow:hidden;
    transition:.18s transform,.18s background,.18s border;
  }
  .fCard:hover{transform: translateY(-2px); background: rgba(255,255,255,.07); border-color: rgba(255,255,255,.16)}
  .icon{
    width:34px;height:34px;border-radius:12px;
    display:grid; place-items:center;
    background: rgba(242,207,122,.14);
    border:1px solid rgba(242,207,122,.24);
    margin-bottom:10px;
  }
  .fCard h3{margin:0;font-size:14px}
  .fCard p{margin:6px 0 0; color:var(--muted); font-size:12.5px; line-height:1.35}
  .badge{
    position:absolute; top:12px; right:12px;
    font-size:11px;padding:5px 8px;border-radius:999px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.25);font-weight:800;
  }
  .badge.gold{
    color:#1a1208;
    background: linear-gradient(135deg, rgba(242,207,122,.95), rgba(202,162,75,.92));
    border-color: rgba(255,255,255,.18);
  }
  .lockedMark{opacity:.6; filter:saturate(.8)}

  /* Pricing */
  .pricingGrid{margin-top:14px;display:grid;grid-template-columns: repeat(3, minmax(0,1fr));gap:12px}
  .plan{
    border-radius:22px;background: rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.12);
    padding:18px;box-shadow: 0 10px 28px rgba(0,0,0,.35);
    position:relative;overflow:hidden;
  }
  .plan.pop{border-color: rgba(242,207,122,.35); background: linear-gradient(180deg, rgba(242,207,122,.10), rgba(255,255,255,.04));}
  .plan h3{margin:0;font-size:16px}
  .price{margin:8px 0 0; font-size:34px; font-weight:950; letter-spacing:-.6px}
  .per{color:var(--muted); font-size:12px; margin-left:6px}
  ul{margin:12px 0 0; padding:0 0 0 18px; color:var(--muted); font-size:13px; line-height:1.55}
  .btnRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
  .small{font-size:12px; color:var(--muted); margin-top:10px}
  .noteLine{font-size:12px;color:var(--muted); margin-top:10px}

  /* Dashboard */
  .dashTop{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap}
  .rolePill{
    font-weight:950;padding:7px 10px;border-radius:999px;
    border:1px solid rgba(255,255,255,.14); background: rgba(0,0,0,.25);
  }
  .planPill{
    font-weight:950;padding:7px 10px;border-radius:999px;
    border:1px solid rgba(242,207,122,.25); background: rgba(242,207,122,.12); color:#ffe9b6;
  }
  .dashGrid{margin-top:14px;display:grid;grid-template-columns: 1.2fr .8fr;gap:12px}
  .panel{
    border-radius:22px;background: rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.10);
    padding:14px;box-shadow: 0 10px 28px rgba(0,0,0,.35);
  }
  .panel h3{margin:0 0 10px;font-size:14px}
  .row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .item{padding:10px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background: rgba(255,255,255,.04)}
  .item small{color:var(--muted)}
  .btn{
    padding:10px 12px;border-radius:14px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.06);
    color:var(--ink);font-weight:850;cursor:pointer;
  }
  .btn:hover{background: rgba(255,255,255,.09)}
  .btn.gold{background: linear-gradient(135deg, rgba(242,207,122,.95), rgba(202,162,75,.92)); color:#1a1208; border-color: rgba(255,255,255,.18)}
  .btn.danger{background: rgba(185,77,123,.18); border-color: rgba(185,77,123,.26)}
  .list{margin-top:10px;display:flex;flex-direction:column;gap:8px}
  .chart{width:100%;height:160px;border-radius:16px;border:1px solid rgba(255,255,255,.10);background: rgba(0,0,0,.25);overflow:hidden}
  canvas{display:block}

  /* Modal */
  .modalBack{
    position:fixed; inset:0; z-index:80;
    background: rgba(0,0,0,.65);
    display:none;align-items:center;justify-content:center;padding:16px;
  }
  .modalBack.show{display:flex}
  .modal{
    width:min(560px, 100%);
    border-radius:22px;
    background: rgba(15,10,16,.92);
    border:1px solid rgba(255,255,255,.16);
    box-shadow: 0 18px 60px rgba(0,0,0,.7);
    padding:16px;
  }
  .modalTop{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:6px 6px 12px}
  .x{width:36px;height:36px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background: rgba(255,255,255,.06);color:var(--ink);cursor:pointer;font-weight:900}
  .two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .input, textarea, select{
    width:100%;border-radius:14px;border:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.25);color:var(--ink);padding:10px;outline:none;
  }
  textarea{min-height:110px; resize:vertical}
  .hint{color:var(--muted); font-size:12px; line-height:1.35; margin:10px 0 0}
  .hr{height:1px;background:rgba(255,255,255,.10);margin:12px 0}

  .toast{
    position:fixed; left:50%; transform:translateX(-50%);
    bottom:18px; z-index:90;
    background: rgba(15,10,16,.92);
    border:1px solid rgba(255,255,255,.14);
    padding:10px 12px;border-radius:14px;
    box-shadow: 0 18px 60px rgba(0,0,0,.6);
    display:none;max-width:min(560px, calc(100% - 26px));
  }
  .toast.show{display:block}

  @media (max-width: 980px){
    .heroGrid{grid-template-columns:1fr}
    .featureGrid{grid-template-columns: repeat(2, minmax(0,1fr))}
    .pricingGrid{grid-template-columns:1fr}
    .dashGrid{grid-template-columns:1fr}
  }
</style>
</head>
<body>

<div class="topbar">
  <div class="wrap inner">
    <div class="brand" onclick="go('home')">
      <div class="logo">H</div>
      <div>
        <h1>Hustle Her Social Suite</h1>
        <small>Luxury planner energy ‚Ä¢ Social media execution</small>
      </div>
    </div>
    <div class="nav">
      <button class="pill" onclick="go('home')">Home</button>
      <button class="pill" onclick="go('pricing')">Pricing</button>
      <button class="pill" id="btnLogin" onclick="openLogin()">Login</button>
      <button class="cta" id="btnOpenDash" onclick="openDashboard()">Open Dashboard</button>
    </div>
  </div>
</div>

<section class="view active" id="view-home">
  <div class="wrap hero">
    <div class="heroCard">
      <div class="glowOrb"></div>
      <div class="heroGrid">
        <div>
          <div class="kicker">‚ú® <span>Luxury micro‚ÄëSaaS for business women</span></div>
          <div class="headline">
            Plan your content.<br/>
            Post like a <span class="gold">CEO</span>.<br/>
            Profit in heels.
          </div>
          <div class="sub">
            A mini micro‚ÄëSaaS inspired by a digital planner workflow: contacts, goals, calendar, to‚Äëdos, notes, and
            analytics ‚Äî redesigned for women running marketing on Instagram, TikTok, and Pinterest.
          </div>
          <div class="heroBtns">
            <button class="cta" onclick="openDashboard()">Launch Dashboard</button>
            <button class="ghost" onclick="go('pricing')">See Pricing</button>
          </div>
          <div class="chips">
            <span class="chip">üóìÔ∏è Content Calendar</span>
            <span class="chip">üß≤ Brand/Client Hub</span>
            <span class="chip">‚úÖ CEO To‚ÄëDos</span>
            <span class="chip">üìù Notes + Hooks</span>
            <span class="chip">ü§ù Affiliate System</span>
            <span class="chip">‚ú® AI Content Generator</span>
            <span class="chip">üîî Reminders</span>
            <span class="chip">üìà Analytics</span>
          </div>
        </div>

        <div class="heroRight">
          <div class="miniTop">
            <span class="tag">TODAY</span>
            <div style="display:flex;gap:10px;align-items:center;color:var(--muted);font-size:12px;">
              <span>Posts planned <b style="color:var(--ink);">3</b></span>
              <span>Tasks <b style="color:var(--ink);">7</b></span>
            </div>
          </div>

          <div class="statRow">
            <div class="stat"><b>IG Reel</b><small>Hook: ‚ÄúStop scrolling‚Ä¶‚Äù</small></div>
            <div class="stat"><b>TikTok</b><small>Behind‚Äëthe‚Äëscenes</small></div>
          </div>

          <div class="miniCards">
            <div class="miniCard"><div class="t">Pins</div><div class="d">3 product visuals</div></div>
            <div class="miniCard"><div class="t">DM Follow‚Äëups</div><div class="d">2 collab leads</div></div>
          </div>

          <div class="heroArtRow" aria-hidden="true">
            <img class="char big" id="char1" alt="Character 1" />
            <img class="char" id="char2" alt="Character 2" />
            <img class="char" id="char3" alt="Character 3" />
            <img class="char" id="char4" alt="Character 4" />
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="h2">What you get</div>
      <div class="p">Demo unlocks only 2 features. Buyers unlock by plan. Owner unlocks everything.</div>
      <div class="featureGrid" id="featureGrid"></div>
    </div>
  </div>
</section>

<section class="view" id="view-pricing">
  <div class="wrap section">
    <div class="h2">Plans</div>
    <div class="p">Stripe-ready buttons included (paste your Payment Links). Demo = 2 features only.</div>

    <div class="pricingGrid">
      <div class="plan">
        <h3>Starter</h3>
        <div class="price">$7<span class="per">/mo</span></div>
        <ul><li>2 features unlocked</li><li>Basic exports</li><li>Limited analytics</li></ul>
        <div class="btnRow">
          <button class="btn gold" onclick="openStripe('starter')">Buy with Stripe</button>
          <button class="btn" onclick="activatePlan('starter')">I already paid</button>
        </div>
        <div class="small">Static site activation (localStorage).</div>
      </div>

      <div class="plan pop">
        <h3>Pro</h3>
        <div class="price">$19<span class="per">/mo</span></div>
        <ul><li>5 features unlocked</li><li>Affiliate summary</li><li>Marketing Vault exports</li></ul>
        <div class="btnRow">
          <button class="btn gold" onclick="openStripe('pro')">Buy with Stripe</button>
          <button class="btn" onclick="activatePlan('pro')">I already paid</button>
        </div>
        <div class="small">Owner always has full access.</div>
      </div>

      <div class="plan">
        <h3>CEO</h3>
        <div class="price">$39<span class="per">/mo</span></div>
        <ul><li>All features unlocked</li><li>Full exports + admin tracker</li><li>Advanced analytics</li></ul>
        <div class="btnRow">
          <button class="btn gold" onclick="openStripe('ceo')">Buy with Stripe</button>
          <button class="btn" onclick="activatePlan('ceo')">I already paid</button>
        </div>
        <div class="small">Best for agencies & power users.</div>
      </div>
    </div>

    <div class="noteLine">
      <b>Stripe note:</b> On static GitHub Pages, Payment Links redirect to Stripe Checkout.
      For simple auto-activation, set your Stripe success URL to <code>.../index.html?paid=pro</code> (or starter/ceo).
    </div>
  </div>
</section>

<section class="view" id="view-dashboard">
  <div class="wrap section">
    <div class="dashTop">
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <span class="rolePill" id="rolePill">DEMO</span>
        <span class="planPill" id="planPill">2-feature demo</span>
        <span style="color:var(--muted);font-size:12px">Owner sees plan matrix + full tools.</span>
      </div>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <button class="btn" onclick="go('home')">Back to Home</button>
        <button class="btn danger" onclick="logout()">Log out</button>
      </div>
    </div>

    <div class="dashGrid">
      <div class="panel">
        <h3>Animated Performance</h3>
        <div class="row2">
          <div class="item"><b>Site Views</b><br/><span style="font-size:28px;font-weight:950" id="viewsNum">0</span><br/><small>Auto-increments per visit</small></div>
          <div class="item"><b>Profit</b><br/><span style="font-size:28px;font-weight:950">$<span id="profitNum">0</span></span><br/><small>Owner can add sales</small></div>
        </div>
        <div style="height:10px"></div>
        <div class="chart"><canvas id="spark"></canvas></div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
          <button class="btn gold" id="btnAddSale" onclick="addSale()">Add Sale (Admin)</button>
          <button class="btn" onclick="exportData()">Export ALL data (JSON)</button>
          <button class="btn" onclick="importData()">Import JSON</button>
        </div>
        <div class="hint">Admin Profit Tracker: add sales, track affiliate commissions, export/import JSON.</div>
      </div>

      <div class="panel">
        <h3>Unlocked Features</h3>
        <div class="list" id="unlockList"></div>
        <div class="hint">Demo unlocks only 2 features. Pro/CEO unlock more. Owner unlocks all + plan matrix.</div>
      </div>
    </div>

    <div class="section" style="padding-top:14px">
      <div class="featureGrid" id="dashCards"></div>
    </div>
  </div>
</section>

<div class="modalBack" id="modalBack" onclick="if(event.target.id==='modalBack') closeLogin()">
  <div class="modal">
    <div class="modalTop">
      <b id="modalTitle">Login</b>
      <button class="x" onclick="closeLogin()">‚úï</button>
    </div>
    <div id="modalBody">
      <div class="two">
        <div>
          <div style="font-weight:850;margin:0 0 6px">Email / Username</div>
          <input class="input" id="loginUser" placeholder="owner or buyer" />
        </div>
        <div>
          <div style="font-weight:850;margin:0 0 6px">Password</div>
          <input class="input" id="loginPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
        </div>
      </div>

      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
        <button class="btn gold" onclick="doLogin()">Login</button>
        <button class="btn" onclick="setDemo()">Continue Demo</button>
      </div>

      <div class="hr"></div>

      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <button class="btn" onclick="quickBuyer('starter')">Buyer: Starter</button>
        <button class="btn" onclick="quickBuyer('pro')">Buyer: Pro</button>
        <button class="btn" onclick="quickBuyer('ceo')">Buyer: CEO</button>
      </div>

      <p class="hint">
        <b>Test credentials:</b><br/>
        Owner: <code>owner</code> / <code>hustle2026</code><br/>
        Buyer: <code>buyer</code> / <code>hustle</code>
      </p>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
/* ===== CONFIG (replace with your own) ===== */
const ASSET = {
  // Replace with your 4 character image URLs in your repo, e.g. "./assets/char1.png"
  characters: [
    "https://images.unsplash.com/photo-1520975958225-691410b5d3ae?auto=format&fit=crop&w=600&q=80",
    "https://images.unsplash.com/photo-1524250502761-1ac6f2e30d43?auto=format&fit=crop&w=600&q=80",
    "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80",
    "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80"
  ],
  stripeLinks: {
    starter: "PASTE_STARTER_STRIPE_PAYMENT_LINK_HERE",
    pro: "PASTE_PRO_STRIPE_PAYMENT_LINK_HERE",
    ceo: "PASTE_CEO_STRIPE_PAYMENT_LINK_HERE"
  }
};

const FEATURES = [
  {key:"calendar", name:"Content Calendar", icon:"üóìÔ∏è", desc:"Plan posts by date & platform." , plans:["starter","pro","ceo"]},
  {key:"ai", name:"AI Content Generator", icon:"‚ú®", desc:"Generate hooks, captions & hashtags (template AI demo).", plans:["starter","pro","ceo"]},
  {key:"todos", name:"CEO To‚ÄëDos", icon:"‚úÖ", desc:"Daily execution checklist & follow‚Äëups.", plans:["pro","ceo"]},
  {key:"notes", name:"Notes + Hooks", icon:"üìù", desc:"Timestamped notes + swipe‚Äëfile hooks.", plans:["pro","ceo"]},
  {key:"crm", name:"Brand/Client Hub", icon:"üß≤", desc:"Track leads, clients & collabs.", plans:["pro","ceo"]},
  {key:"affiliate", name:"Affiliate System", icon:"ü§ù", desc:"Track referrals + commissions.", plans:["ceo"]},
  {key:"vault", name:"Marketing Vault", icon:"üì¶", desc:"Store & export content + docs.", plans:["ceo"]},
  {key:"notify", name:"Reminders", icon:"üîî", desc:"Set reminders for posting & follow‚Äëups.", plans:["ceo"]},
  {key:"analytics", name:"Analytics", icon:"üìà", desc:"Views + profit tracker + mini chart.", plans:["starter","pro","ceo"]},
];
const PLAN_ORDER = ["starter","pro","ceo"];
const PLAN_LABEL = {starter:"Starter", pro:"Pro", ceo:"CEO"};

let state = {
  role:"demo", plan:"starter",
  views:0, profit:0, sales:[], affiliates:[], notes:[],
  todos:"", vault:"", crm:[], reminders:[], calendarText:""
};
const LSKEY="HHSuite_v2_state";

/* ===== helpers ===== */
const $=id=>document.getElementById(id);
function toast(msg){const t=$("toast");t.textContent=msg;t.classList.add("show");clearTimeout(window.__tt);window.__tt=setTimeout(()=>t.classList.remove("show"),2200);}
function now(){return new Date().toLocaleString();}
function saveState(){localStorage.setItem(LSKEY, JSON.stringify(state));}
function loadState(){try{const raw=localStorage.getItem(LSKEY); if(raw) state={...state,...JSON.parse(raw)};}catch(e){}}
function bumpViews(){state.views=Number(state.views||0)+1; saveState();}
function currency(n){return (Number(n||0)).toFixed(0);}

/* ===== nav ===== */
function go(where){
  ["home","pricing","dashboard"].forEach(v=>$("view-"+v).classList.toggle("active", v===where));
  window.scrollTo({top:0, behavior:"smooth"});
}
function openDashboard(){go("dashboard"); renderDashboard();}

/* ===== login ===== */
function openLogin(){ $("modalBack").classList.add("show"); setTimeout(()=>{$("loginUser")?.focus()}, 30); }
function closeLogin(){ $("modalBack").classList.remove("show"); }
function setDemo(){ state.role="demo"; saveState(); closeLogin(); toast("Demo mode: 2 features."); openDashboard(); }
function quickBuyer(plan){ state.role="buyer"; state.plan=plan; saveState(); closeLogin(); toast("Buyer: "+PLAN_LABEL[plan]); openDashboard(); }
function doLogin(){
  const u=($("loginUser").value||"").trim().toLowerCase();
  const p=($("loginPass").value||"").trim();
  if(u==="owner" && p==="hustle2026"){ state.role="owner"; saveState(); closeLogin(); toast("Owner unlocked."); openDashboard(); return; }
  if(u==="buyer" && p==="hustle"){ state.role="buyer"; state.plan=state.plan||"pro"; saveState(); closeLogin(); toast("Buyer logged in."); openDashboard(); return; }
  toast("Login failed. Use test credentials.");
}
function logout(){ state.role="demo"; saveState(); toast("Logged out ‚Üí demo."); go("home"); renderAll(); }

/* ===== stripe ===== */
function openStripe(plan){
  const link = ASSET.stripeLinks[plan];
  if(!link || link.startsWith("PASTE_")) return toast("Paste your Stripe Payment Link in the file first.");
  window.open(link, "_blank");
}
function activatePlan(plan){
  state.role="buyer"; state.plan=plan; saveState(); toast("Activated "+PLAN_LABEL[plan]+" (local)."); openDashboard();
}

/* ===== feature access ===== */
function unlockedKeys(){
  if(state.role==="owner") return FEATURES.map(f=>f.key);
  if(state.role==="demo") return [FEATURES[0].key, FEATURES[1].key]; // 2 demos only
  return FEATURES.filter(f=>f.plans.includes(state.plan||"starter")).map(f=>f.key);
}
function isUnlocked(key){return unlockedKeys().includes(key);}
function planIncludes(key, plan){return FEATURES.find(f=>f.key===key)?.plans?.includes(plan);}

/* ===== render landing ===== */
function renderCharacters(){
  ["char1","char2","char3","char4"].forEach((id,i)=>{ const el=$(id); if(el) el.src = ASSET.characters[i] || ASSET.characters[0]; });
}
function renderFeatureGrid(){
  const grid=$("featureGrid"); grid.innerHTML="";
  const keys=unlockedKeys();
  FEATURES.forEach(f=>{
    const locked=!keys.includes(f.key);
    grid.insertAdjacentHTML("beforeend", `
      <div class="fCard ${locked?"lockedMark":""}">
        <div class="badge ${locked?"":"gold"}">${locked?"Locked":"Unlocked"}</div>
        <div class="icon">${f.icon}</div>
        <h3>${f.name}</h3>
        <p>${f.desc}</p>
      </div>
    `);
  });
}

/* ===== dashboard ===== */
function renderDashboard(){
  $("rolePill").textContent = state.role.toUpperCase();
  $("planPill").textContent = (state.role==="owner") ? "Admin / All features" : (state.role==="demo") ? "2-feature demo" : (PLAN_LABEL[state.plan]+" plan");
  $("viewsNum").textContent = state.views||0;
  $("profitNum").textContent = currency(state.profit||0);
  $("btnAddSale").style.display = (state.role==="owner") ? "inline-block" : "none";

  // unlocked list
  const ul=$("unlockList"); ul.innerHTML="";
  unlockedKeys().forEach(k=>{
    const f=FEATURES.find(x=>x.key===k);
    ul.insertAdjacentHTML("beforeend", `<div class="item"><b>${f.icon} ${f.name}</b><br/><small>${f.desc}</small></div>`);
  });

  // dashboard cards
  const dash=$("dashCards"); dash.innerHTML="";
  FEATURES.forEach(f=>{
    const ok=isUnlocked(f.key);
    dash.insertAdjacentHTML("beforeend", `
      <div class="fCard ${ok?"":"lockedMark"}" style="min-height:150px">
        <div class="badge ${ok?"gold":""}">${ok?"Use":"Locked"}</div>
        <div class="icon">${f.icon}</div>
        <h3>${f.name}</h3>
        <p>${f.desc}</p>
        <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn ${ok?"gold":""}" onclick="openTool('${f.key}')" ${ok?"":"disabled"}>${ok?"Open":"Upgrade"}</button>
          ${state.role==="owner"?`<button class="btn" onclick="showPlanMatrix('${f.key}')">Plan Matrix</button>`:""}
        </div>
      </div>
    `);
  });

  drawSpark();
}

/* ===== tools (modal) ===== */
function setModal(title, body){
  $("modalTitle").textContent = title;
  $("modalBody").innerHTML = body;
  openLogin();
}
function closeTool(){
  // restore login modal content by reloading page section from template
  location.reload(); // simple, ensures everything consistent and removes duplicate buttons
}

function openTool(key){
  if(!isUnlocked(key)) return toast("Locked. Upgrade to unlock.");
  if(key==="ai") return aiTool();
  if(key==="affiliate") return affiliateTool();
  if(key==="vault") return vaultTool();
  if(key==="notes") return notesTool();
  if(key==="todos") return todosTool();
  if(key==="crm") return crmTool();
  if(key==="calendar") return calendarTool();
  if(key==="notify") return notifyTool();
  return toast("Tool opened on dashboard.");
}

/* AI generator (no API) */
function aiTool(){
  setModal("AI Content Generator", `
    <div class="hint"><b>Template AI</b> (no API needed). Generates hooks/captions/hashtags instantly.</div>
    <div style="height:10px"></div>
    <div class="two">
      <div><div style="font-weight:850;margin:0 0 6px">Brand</div><input class="input" id="aiBrand" value="Hustle Her Social Suite"></div>
      <div><div style="font-weight:850;margin:0 0 6px">Offer</div><input class="input" id="aiOffer" value="luxury social planner micro‚ÄëSaaS"></div>
    </div>
    <div style="height:10px"></div>
    <div class="two">
      <div><div style="font-weight:850;margin:0 0 6px">Tone</div>
        <select class="input" id="aiTone"><option>Luxury</option><option>Bold CEO</option><option>Soft + Elegant</option><option>Playful</option></select>
      </div>
      <div><div style="font-weight:850;margin:0 0 6px">Platform</div>
        <select class="input" id="aiPlatform"><option>Instagram</option><option>TikTok</option><option>Pinterest</option><option>Threads</option></select>
      </div>
    </div>
    <div style="height:10px"></div>
    <button class="btn gold" onclick="runAI()">Generate</button>
    <div style="height:10px"></div>
    <textarea id="aiOut" placeholder="Your captions will appear here..."></textarea>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn" onclick="copyAI()">Copy</button>
      <button class="btn" onclick="downloadText('aiOut','ai-captions.txt')">Download</button>
      <button class="btn danger" onclick="closeLogin()">Close</button>
    </div>
  `);
}
function runAI(){
  const brand = ($("aiBrand").value||"").trim();
  const offer = ($("aiOffer").value||"").trim();
  const tone = $("aiTone").value;
  const platform = $("aiPlatform").value;
  const hooks=[
    "Stop scrolling ‚Äî your content deserves a CEO strategy.",
    "If you‚Äôre posting randomly, this is your sign.",
    "Busy isn‚Äôt booked. Structure is.",
    "One dashboard. One routine. Bigger results.",
    "Your brand isn‚Äôt messy. Your workflow is."
  ];
  const angles=[
    "plan your week in minutes","track what‚Äôs working with clean analytics","store hooks + captions in one vault",
    "keep follow-ups, collabs, and leads organized","turn content into consistent sales"
  ];
  const ctas=["Open the dashboard and start today.","Upgrade to unlock the full suite.","Build your posting routine in 10 minutes.","Try the demo and feel the difference."];
  const hashtags={
    Instagram:"#womeninbusiness #ceomindset #contentstrategy #digitalproducts #socialmediamarketing",
    TikTok:"#businessTok #contentcreator #ceotips #marketinghacks #smallbusinesstips",
    Pinterest:"#contentcalendar #marketingplan #businesstips #branding",
    Threads:"#buildinpublic #contentstrategy #womenfounders #marketing"
  };
  const pick=a=>a[Math.floor(Math.random()*a.length)];
  const lead = tone==="Luxury" ? "Luxury-level execution, without the chaos."
             : tone==="Bold CEO" ? "CEO energy only. No excuses."
             : tone==="Soft + Elegant" ? "A soft routine that still produces big results."
             : "Make your content plan fun again.";
  const out = `${lead}

HOOK:
‚Ä¢ ${pick(hooks)}

CAPTION (${platform}):
‚Ä¢ ${brand} = ${offer}.
‚Ä¢ Today‚Äôs move: ${pick(angles)}.
‚Ä¢ Keep it consistent. Keep it profitable.
‚Ä¢ CTA: ${pick(ctas)}

HASHTAGS:
${hashtags[platform]}`.trim();
  $("aiOut").value=out;
  if(state.role!=="demo"){ state.vault = (state.vault||"") + "\n\n["+now()+"] AI Output:\n"+out+"\n"; saveState(); }
}
function copyAI(){ navigator.clipboard.writeText($("aiOut").value||"").then(()=>toast("Copied."), ()=>toast("Copy failed.")); }

/* Notes */
function notesTool(){
  setModal("Notes + Hooks", `
    <div class="hint">Timestamped notes. Downloadable.</div>
    <div style="height:10px"></div>
    <textarea id="noteText" placeholder="Write a note or hook..."></textarea>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn gold" onclick="addNote()">Add Note</button>
      <button class="btn" onclick="downloadNotes()">Download</button>
      <button class="btn danger" onclick="closeLogin()">Close</button>
    </div>
    <div class="list" id="noteList" style="margin-top:12px"></div>
  `);
  renderNotesList();
}
function addNote(){ const txt=($("noteText").value||"").trim(); if(!txt) return toast("Type a note."); state.notes.unshift({t:now(),txt}); saveState(); $("noteText").value=""; renderNotesList(); }
function renderNotesList(){ const box=$("noteList"); if(!box) return; box.innerHTML=""; (state.notes||[]).slice(0,25).forEach(n=>box.insertAdjacentHTML("beforeend", `<div class="item"><b>${n.t}</b><br/><small>${escapeHtml(n.txt)}</small></div>`)); }
function downloadNotes(){ downloadRaw((state.notes||[]).map(n=>`${n.t}: ${n.txt}`).join("\n\n"), "notes.txt"); }

/* To-dos */
function todosTool(){
  setModal("CEO To‚ÄëDos", `
    <div class="hint">Save your daily action list. Download anytime.</div>
    <div style="height:10px"></div>
    <textarea id="todosBox" placeholder="‚Ä¢ Schedule 3 posts\n‚Ä¢ DM 5 collabs\n‚Ä¢ Follow up with 10 leads"></textarea>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn gold" onclick="saveTodos()">Save</button>
      <button class="btn" onclick="downloadText('todosBox','todos.txt')">Download</button>
      <button class="btn danger" onclick="closeLogin()">Close</button>
    </div>
  `);
  $("todosBox").value = state.todos || "";
}
function saveTodos(){ state.todos = $("todosBox").value; saveState(); toast("Saved."); }

/* CRM */
function crmTool(){
  setModal("Brand/Client Hub", `
    <div class="hint">Track leads, clients, collabs. Downloadable.</div>
    <div style="height:10px"></div>
    <div class="two">
      <input class="input" id="crmName" placeholder="Name / Brand" />
      <select class="input" id="crmStage"><option>Lead</option><option>Warm</option><option>Client</option><option>Collab</option></select>
    </div>
    <div style="height:10px"></div>
    <input class="input" id="crmNote" placeholder="Note (e.g., follow up Friday)" />
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn gold" onclick="addCRM()">Add</button>
      <button class="btn" onclick="exportCRM()">Download</button>
      <button class="btn danger" onclick="closeLogin()">Close</button>
    </div>
    <div class="list" id="crmList" style="margin-top:12px"></div>
  `);
  renderCRM();
}
function addCRM(){
  const name=($("crmName").value||"").trim(); if(!name) return toast("Add a name.");
  const stage=$("crmStage").value; const note=($("crmNote").value||"").trim();
  state.crm.unshift({t:now(),name,stage,note}); saveState();
  $("crmName").value=""; $("crmNote").value="";
  renderCRM(); toast("Saved.");
}
function renderCRM(){
  const box=$("crmList"); if(!box) return; box.innerHTML="";
  (state.crm||[]).slice(0,25).forEach(c=>box.insertAdjacentHTML("beforeend", `<div class="item"><b>${escapeHtml(c.name)}</b> ‚Ä¢ <code>${c.stage}</code><br/><small>${c.t}${c.note? " ‚Ä¢ "+escapeHtml(c.note):""}</small></div>`));
}
function exportCRM(){ downloadRaw((state.crm||[]).map(c=>`${c.t} | ${c.stage} | ${c.name} | ${c.note||""}`).join("\n"), "crm.txt"); }

/* Calendar */
function calendarTool(){
  setModal("Content Calendar", `
    <div class="hint">Plan posts by date/platform. Exportable.</div>
    <div style="height:10px"></div>
    <div class="two">
      <input class="input" id="calDate" type="date" />
      <select class="input" id="calPlat"><option>Instagram</option><option>TikTok</option><option>Pinterest</option><option>Threads</option></select>
    </div>
    <div style="height:10px"></div>
    <input class="input" id="calIdea" placeholder="Post idea / hook" />
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn gold" onclick="calAdd()">Add</button>
      <button class="btn" onclick="downloadText('calExport','calendar.txt')">Download</button>
      <button class="btn danger" onclick="closeLogin()">Close</button>
    </div>
    <div style="height:10px"></div>
    <textarea id="calExport" placeholder="Calendar entries..."></textarea>
  `);
  $("calExport").value = state.calendarText || "";
}
function calAdd(){
  const d=$("calDate").value||"(no date)";
  const p=$("calPlat").value;
  const idea=$("calIdea").value||"(no idea)";
  const line=`[${now()}] ${d} ‚Ä¢ ${p} ‚Ä¢ ${idea}`;
  state.calendarText = (state.calendarText? state.calendarText+"\n":"") + line;
  saveState();
  $("calExport").value=state.calendarText;
  $("calIdea").value="";
  toast("Added.");
}

/* Marketing vault */
function vaultTool(){
  setModal("Marketing Vault", `
    <div class="hint">Store copy, scripts, docs. Downloadable.</div>
    <div style="height:10px"></div>
    <textarea id="vaultBox" placeholder="Paste marketing copy, ad scripts, links..."></textarea>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn gold" onclick="saveVault()">Save</button>
      <button class="btn" onclick="downloadText('vaultBox','marketing-vault.txt')">Download</button>
      <button class="btn danger" onclick="closeLogin()">Close</button>
    </div>
  `);
  $("vaultBox").value = state.vault || "";
}
function saveVault(){ state.vault = $("vaultBox").value; saveState(); toast("Saved."); }

/* Affiliate */
function affiliateTool(){
  setModal("Affiliate System", `
    <div class="hint">Owner can log referrals + commissions (timestamped). Downloadable.</div>
    <div style="height:10px"></div>
    <div class="two">
      <input class="input" id="affCode" placeholder="Affiliate code (e.g., KISHA30)" />
      <input class="input" id="affSale" type="number" placeholder="Sale amount (e.g., 39)" />
    </div>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn gold" onclick="addAffiliate()" ${state.role==="owner"?"":"disabled"}>Add Referral (Owner)</button>
      <button class="btn" onclick="downloadAff()">Download</button>
      <button class="btn danger" onclick="closeLogin()">Close</button>
    </div>
    <div class="list" id="affList" style="margin-top:12px"></div>
  `);
  renderAff();
}
function addAffiliate(){
  if(state.role!=="owner") return toast("Owner only.");
  const code=($("affCode").value||"AFFILIATE").trim();
  const sale=Number($("affSale").value||0);
  if(!sale) return toast("Enter a sale amount.");
  const commission=Math.round(sale*0.30);
  state.affiliates.unshift({t:now(),code,saleAmount:sale,commission});
  state.profit=Number(state.profit||0)+sale;
  saveState();
  $("affSale").value="";
  renderAff();
  renderDashboard();
  toast("Referral logged (+$"+sale+").");
}
function renderAff(){
  const box=$("affList"); if(!box) return;
  box.innerHTML="";
  const totalRef=(state.affiliates||[]).length;
  const totalCom=(state.affiliates||[]).reduce((a,x)=>a+Number(x.commission||0),0);
  box.insertAdjacentHTML("beforeend", `<div class="item"><b>${totalRef} referrals</b><br/><small>Total commissions owed: $${currency(totalCom)}</small></div>`);
  (state.affiliates||[]).slice(0,20).forEach(a=>box.insertAdjacentHTML("beforeend", `<div class="item"><b>${escapeHtml(a.code)}</b> ‚Ä¢ $${a.saleAmount} sale<br/><small>${a.t} ‚Ä¢ 30% = $${a.commission}</small></div>`));
}
function downloadAff(){ downloadRaw((state.affiliates||[]).map(a=>`${a.t} | ${a.code} | sale $${a.saleAmount} | commission $${a.commission}`).join("\n"), "affiliate.txt"); }

/* Reminders */
function notifyTool(){
  setModal("Reminders", `
    <div class="hint">Uses browser Notifications (allow permission). Downloadable history.</div>
    <div style="height:10px"></div>
    <input class="input" id="remMsg" placeholder="Reminder message (e.g., Post the IG Reel)" />
    <div style="height:10px"></div>
    <div class="two">
      <input class="input" id="remMin" type="number" placeholder="Minutes from now (e.g., 30)" />
      <button class="btn gold" onclick="setReminder()">Set Reminder</button>
    </div>
    <div class="list" id="remList" style="margin-top:12px"></div>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <button class="btn" onclick="downloadRem()">Download</button>
      <button class="btn danger" onclick="closeLogin()">Close</button>
    </div>
  `);
  renderRem();
}
function setReminder(){
  const msg=($("remMsg").value||"Reminder").trim();
  const mins=Number($("remMin").value||0);
  if(!mins) return toast("Enter minutes.");
  state.reminders.unshift({t:now(),msg,mins});
  saveState(); renderRem(); toast("Reminder set.");
  if("Notification" in window){
    Notification.requestPermission().then(()=>{
      setTimeout(()=>{ try{ new Notification("Hustle Her Social Suite", {body: msg}); }catch(e){} }, mins*60*1000);
    });
  }
}
function renderRem(){
  const box=$("remList"); if(!box) return; box.innerHTML="";
  (state.reminders||[]).slice(0,20).forEach(r=>box.insertAdjacentHTML("beforeend", `<div class="item"><b>${escapeHtml(r.msg)}</b><br/><small>${r.t} ‚Ä¢ in ${r.mins} min</small></div>`));
}
function downloadRem(){ downloadRaw((state.reminders||[]).map(r=>`${r.t} | in ${r.mins} min | ${r.msg}`).join("\n"), "reminders.txt"); }

/* Admin profit */
function addSale(){
  if(state.role!=="owner") return toast("Owner only.");
  const plan=prompt("Sale plan? starter / pro / ceo", "pro") || "pro";
  const amt=Number(prompt("Sale amount (USD)?", plan==="starter"?"7":plan==="ceo"?"39":"19")||0);
  if(!amt) return;
  state.sales.unshift({t:now(),plan,amount:amt});
  state.profit=Number(state.profit||0)+amt;
  saveState(); renderDashboard(); toast("Sale added.");
}

/* Plan matrix */
function showPlanMatrix(key){
  const f=FEATURES.find(x=>x.key===key); if(!f) return;
  const rows = PLAN_ORDER.map(p=>`<div class="item"><b>${PLAN_LABEL[p]}</b> ‚Äî ${planIncludes(key,p)?"‚úÖ Included":"üîí Locked"}</div>`).join("");
  setModal("Plan Matrix: "+f.name, `${rows}<div style="margin-top:10px"><button class="btn danger" onclick="closeLogin()">Close</button></div>`);
}

/* Export/import */
function exportData(){ const blob=new Blob([JSON.stringify(state,null,2)],{type:"application/json"}); const a=document.createElement("a"); a.href=URL.createObjectURL(blob); a.download="hustleher-export.json"; a.click(); }
function importData(){ const raw=prompt("Paste JSON export here:"); if(!raw) return; try{ state={...state,...JSON.parse(raw)}; saveState(); toast("Imported."); renderAll(); }catch(e){ toast("Invalid JSON."); } }

/* Download helpers */
function downloadRaw(text, filename){ const blob=new Blob([text],{type:"text/plain"}); const a=document.createElement("a"); a.href=URL.createObjectURL(blob); a.download=filename; a.click(); }
function downloadText(id, filename){ downloadRaw($(id).value||"", filename); }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

/* Animated chart */
function drawSpark(){
  const c=$("spark"); if(!c) return;
  const ctx=c.getContext("2d");
  const dpr=window.devicePixelRatio||1;
  const rect=c.parentElement.getBoundingClientRect();
  c.width=Math.floor(rect.width*dpr);
  c.height=Math.floor(160*dpr);
  ctx.setTransform(dpr,0,0,dpr,0,0);
  const w=rect.width, h=160;

  const base=Math.max(10, Number(state.profit||0)*0.15);
  const pts=Array.from({length:24},(_,i)=>{
    const saleBoost=(state.sales||[]).slice(0,8).reduce((a,s,idx)=>a+(Math.max(0,8-idx)*2),0);
    return base+saleBoost+Math.sin((i/24)*Math.PI*3)*8+Math.random()*6;
  });
  const max=Math.max(...pts,30), min=Math.min(...pts,0);

  let t0=performance.now();
  function frame(t){
    const tt=(t-t0)/1000;
    ctx.clearRect(0,0,w,h);
    const g=ctx.createLinearGradient(0,0,w,h);
    g.addColorStop(0,"rgba(242,207,122,.10)");
    g.addColorStop(1,"rgba(185,77,123,.06)");
    ctx.fillStyle=g; ctx.fillRect(0,0,w,h);

    ctx.strokeStyle="rgba(255,255,255,.08)";
    for(let i=1;i<4;i++){ const y=(h/4)*i; ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(w,y); ctx.stroke(); }

    ctx.lineWidth=2.5; ctx.strokeStyle="rgba(242,207,122,.95)";
    ctx.beginPath();
    pts.forEach((v,i)=>{
      const x=(w/(pts.length-1))*i;
      const norm=(v-min)/(max-min+0.0001);
      const y=h-(norm*h*0.86+10);
      const wig=Math.sin(tt*2+i*0.6)*1.4;
      if(i===0) ctx.moveTo(x,y+wig); else ctx.lineTo(x,y+wig);
    });
    ctx.stroke();

    const gg=ctx.createLinearGradient(0,0,0,h);
    gg.addColorStop(0,"rgba(242,207,122,.18)");
    gg.addColorStop(1,"rgba(242,207,122,0)");
    ctx.fillStyle=gg;
    ctx.lineTo(w,h); ctx.lineTo(0,h); ctx.closePath(); ctx.fill();

    ctx.fillStyle="rgba(255,255,255,.85)";
    ctx.font="12px system-ui, -apple-system, Segoe UI, Roboto, Arial";
    ctx.fillText("Profit trend (demo animation)", 12, 18);

    window.__sparkRAF=requestAnimationFrame(frame);
  }
  cancelAnimationFrame(window.__sparkRAF||0);
  window.__sparkRAF=requestAnimationFrame(frame);
}

/* ===== init ===== */
function renderAll(){ renderCharacters(); renderFeatureGrid(); }
function handlePaidParam(){
  const p=new URLSearchParams(location.search);
  const paid=(p.get("paid")||"").toLowerCase();
  if(["starter","pro","ceo"].includes(paid)){ activatePlan(paid); history.replaceState({}, "", location.pathname+location.hash); }
}
function init(){
  loadState();
  bumpViews();
  if(state.role==="buyer" && !PLAN_ORDER.includes(state.plan)) state.plan="starter";
  handlePaidParam();
  renderAll();
  if($("view-dashboard").classList.contains("active")) renderDashboard();
}
window.addEventListener("resize", ()=>drawSpark());
init();
</script>
</body>
</html>
